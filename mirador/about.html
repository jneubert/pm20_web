<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="mirador.min.js"></script>
</head>
<body>
<div id="mirador" style="position:absolute; top:0; bottom:0; left:0; right:0;"></div>
<script type="text/javascript">
  // config should be JSON snytax, not js!
  document.addEventListener("DOMContentLoaded", () => {
    let config = {
      id:'mirador',
      language: 'de',
      // not working - #3539
      availableLanguages: {
        de: 'Deutsch',
        en: 'English'
      },
      // apparently no difference - is now default?
      //allowFullscreen: true,
      windows: [],
      workspace: {
        showZoomControls: true
      }
      // TODO activate when language picker works
      //workspaceControlPanel: { enabled: false }
    }
    let url = new URL(window.location.href)
    let m = url.searchParams.get("manifestId")
    let c = url.searchParams.get("canvasId")
    if(m) {
      let w = {
        manifestId: m,
        sideBarOpen: true,
        sideBarPanel: 'canvas',
        showLocalePicker: true,
        // obsolete options!!
        //defaultSideBarPanel: 'index', 
        //sideBarOpenByDefault: true
      }
      if (c) {
        w.canvasId = c
      }
      config.windows.push(w)
    }
    let miradorInstance = Mirador.viewer(config)
  })
</script>
</body>
</html>

